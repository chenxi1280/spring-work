<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="/js/jquery-3.5.0.js"></script>

    <script src="/layui/layui.js"></script>
    <script src="/js/admin.js"></script>
    <script type="text/javascript" th:src="@{/layui/layui.js}"></script>

    <link th:href="@{/layui/css/layui.css}" type="text/css" rel="stylesheet">
    <script src="/layui/layui.js"></script>
    <!--    <script src="/js/getcity.js"></script>-->
</head>
<style>
    .word{
        width: 100px;
        height: 30px;
        background: #E5E5E5;
        text-align: center;
        line-height: 30px;
        font-size: 14px;
    }
</style>

<body>



<div class="layui-carousel" id="carouselView" style="margin: 20px auto">
    <div carousel-item="" id="preview">

    </div>
</div>

<!-- 条目中可以是任意内容，如：<img src=""> -->
<script>

    function initCarousel(){
        layui.use(['carousel', 'form'], function(){
            var carousel = layui.carousel;
            $.ajax({
                url: 'http://localhost:8080/messages/getmessagesimg',
                type:'post',
                data:{
                    isDisplay:1
                },
                dataType:'json',
                success:function (data) {
                    console.log(data)
                    data.item.forEach(value => {
                        var str = ' <div class="word" style="width: 600px;height: 320px; color: black;"><h1 >'+value.name+ '</h1><div style="height: 20px"></div> <p>'+value.value+'</p></div> ';
                        $('#preview').append(str);

                    })

                    //改变下时间间隔、动画类型、高度
                    var ins = carousel.render({
                        elem: '#carouselView'
                        ,interval: 2000
                        ,arrow: 'always'
                        ,anim: 'default'
                        ,width:'600px'
                        ,height:'320px'
                    });
                    ins.reload({
                        elem: '#carouselView'
                        ,interval: 2000
                        ,arrow: 'always'
                        ,anim: 'default'
                        ,width:'600px'
                        ,height:'320px'
                    });
                },
                error:function () {
                    alert("数据库查询失败，请联系管理员！")
                }
            });
        });
    }

    initCarousel();




</script>


</body>
</html>